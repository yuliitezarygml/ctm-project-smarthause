# Инструкция: Подключение к Яндекс.Алисе

Так как ваш "Умный дом" работает локально (`192.168...`), а Алиса — в интернете, нам нужен "туннель".

## Шаг 1: Запуск Туннеля (Ngrok)
Чтобы Яндекс увидел ваш запущенный Next.js сайт:

1.  Скачайте [ngrok](https://ngrok.com/download) (это бесплатно).
2.  Запустите ваш Frontend:
    ```bash
    cd frontend
    npm run dev
    ```
    (Он должен работать на порту 3000).
3.  Откройте новое окно терминала и запустите ngrok:
    ```bash
    ngrok http 3000
    ```
4.  Скопируйте URL, который выдаст ngrok. Он будет выглядеть примерно так: `https://a1b2-c3d4.ngrok-free.app` (обязательно HTTPS).

## Шаг 2: Создание Навыка в Яндексе
1.  Зайдите в [Яндекс.Диалоги](https://dialogs.yandex.ru/developer).
2.  Нажмите **"Создать диалог"** -> **"Навык в Алисе"**.
3.  **Название:** Придумайте имя, например "Мой Смарт Хаус" (чтобы запускать фразой "Алиса, запусти навык Мой Смарт Хаус").
4.  **Backend (Webhook URL):** Вставьте ваш URL из ngrok + путь к файлу:
    `https://ВАШ-URL.ngrok-free.app/api/alice`
5.  Сохраните и нажмите "Тестировать".

## Шаг 3: Проверка
В чате тестирования (справа) напишите:
*   "Включи свет"
*   "Какая погода"

Если в терминале, где запущен `npm run dev`, вы видите запросы, а свет в доме включается — поздравляю, интеграция работает!

## Важные замечания
*   **IP адрес:** В файле `frontend/pages/api/alice.js` жестко прописан IP `192.168.50.9`. Если IP ESP32 изменится, поменяйте его там.
*   **Ngrok:** URL ngrok меняется каждый раз при перезапуске (на бесплатном тарифе). Вам придется обновлять ссылку в Яндекс.Диалогах при каждом новом сеансе разработки.
*   **Приватность:** Не публикуйте навык в каталог (там есть галочка "Приватный"), иначе любой сможет управлять вашим светом, если угадает название.
